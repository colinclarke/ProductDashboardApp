(this["webpackJsonpproduct-dashboard"]=this["webpackJsonpproduct-dashboard"]||[]).push([[0],{56:function(e,t,r){},65:function(e,t,r){},85:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(18),s=r.n(a),o=(r(55),r(56),r(20)),i=r(8),l=r(5),d=r(0);var u=function(){var e=Object(c.useState)(null!==localStorage.getItem("user")),t=Object(l.a)(e,2),r=t[0],n=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("title",{children:"Product Dashboard"}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"container col-md-5",children:Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title",children:"Product Dashboard"}),Object(d.jsx)("p",{className:"card-text",children:"This simple application allows users to perform Create, Read, Update, and Delete (CRUD) methods on a set of products. Only admins can update the price of items."}),Object(d.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(d.jsx)("a",{href:"/products",className:"btn btn-primary",children:"Go to dashboard"}),r?Object(d.jsx)("button",{onClick:function(){localStorage.removeItem("user"),n(!1)},className:"btn btn-primary",children:"Logout"}):Object(d.jsx)("a",{href:"/login",className:"btn btn-primary",children:"Login"}),Object(d.jsx)("a",{href:"/createnewuser",className:"btn btn-primary",children:"Create new user"})]})]})})})]})},j=r.p+"static/media/cart.05dfd14f.svg";var h=function(e){var t=e.isLoggedIn;return Object(d.jsx)("header",{children:Object(d.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark",style:{backgroundColor:"tomato"},children:[Object(d.jsx)("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2",children:Object(d.jsx)("ul",{className:"navbar-nav me-auto",children:Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"/products",className:"nav-link mx-3",children:"Products"})})})}),Object(d.jsxs)("div",{className:"mx-auto order-0",children:[Object(d.jsx)("a",{className:"navbar-brand mx-auto",href:"/",children:"Product CRUD App"}),Object(d.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":".dual-collapse2",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})})]}),Object(d.jsx)("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2",children:Object(d.jsx)("ul",{className:"navbar-nav ms-auto",children:t?Object(d.jsx)("li",{className:"nav-item me-3",children:Object(d.jsxs)("a",{className:"nav-link",href:"/cart",children:[Object(d.jsx)("img",{src:j,alt:"cart logo",className:"mx-3"}),"Cart"]})}):Object(d.jsx)("li",{className:"nav-item me-3",children:Object(d.jsx)("a",{href:"/login",className:"btn btn-secondary",children:"Login"})})})})]})})},b=r(7),O=r(87),p={mode:"cors",headers:{"Content-Type":"application/json"}};function x(){var e=localStorage.getItem("user");return null!==e?"Bearer "+JSON.parse(e).token:""}var m={GetProducts:function(){return delete p.headers.Authorization,p.method="GET",delete p.body,fetch("http://localhost:8484/api/products",p)},NewProduct:function(e,t,r,c){return p.headers.Authorization=x(),p.method="POST",p.body=JSON.stringify({product:{name:e,quantity:t,price:r},category:{name:c}}),fetch("http://localhost:8484/api/products/new",p)},EditProduct:function(e,t,r,c,n){return p.headers.Authorization=x(),p.method="PUT",p.body=JSON.stringify({product:{id:e,name:t,quantity:r,price:c},category:{name:n}}),fetch("http://localhost:8484/api/products/edit/"+e,p)},DeleteProduct:function(e){return p.headers.Authorization=x(),p.method="DELETE",delete p.body,fetch("http://localhost:8484/api/products/delete/"+e,p)},NewUser:function(e,t,r){return p.method="POST",p.body=JSON.stringify({username:e,password:t,roles:r}),fetch("http://localhost:8484/api/create-new-user",p)},AddProductToCart:function(e,t,r){return p.headers.Authorization=x(),p.method="POST",p.body=JSON.stringify({productId:t,quantity:r}),fetch("http://localhost:8484/api/cart/"+e,p)},LoginRequest:function(e,t){return p.method="POST",p.body=JSON.stringify({username:e,password:t}),fetch("http://localhost:8484/api/auth/authenticate",p)},GetCart:function(e){return p.headers.Authorization=x(),p.method="GET",delete p.body,fetch("http://localhost:8484/api/cart/"+e,p)},DeleteProductFromCart:function(e,t){return p.headers.Authorization=x(),p.method="DELETE",delete p.body,fetch("http://localhost:8484/api/cart/"+e+"/product/"+t,p)}};var f=function(e){var t=e.pc,r="undefined"!==typeof t,n=Object(c.useState)(r?t.product.name:""),a=Object(l.a)(n,2),s=a[0],o=a[1],u=Object(c.useState)(r?t.product.quantity:""),j=Object(l.a)(u,2),h=j[0],p=j[1],x=Object(c.useState)(r?t.product.price:""),f=Object(l.a)(x,2),v=f[0],g=f[1],N=Object(c.useState)(r?t.category.name:""),y=Object(l.a)(N,2),w=y[0],S=y[1],C=Object(i.f)(),k=Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"productId",children:[Object(d.jsx)(b.a.Label,{children:"Product Id"}),Object(d.jsx)(b.a.Control,{type:"text",value:r&&t.product.id,readOnly:!0})]});return Object(d.jsxs)(b.a,{onSubmit:function(e){(r?m.EditProduct(t.product.id,s,h,v,w):m.NewProduct(s,h,v,w)).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(){return C.push("/products")})).catch((function(e){console.error("There has been a problem with your fetch operation:",e)})),e.preventDefault()},children:[r&&k,Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"productName",children:[Object(d.jsx)(b.a.Label,{children:"Product Name"}),Object(d.jsx)(b.a.Control,{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"productQuantity",children:[Object(d.jsx)(b.a.Label,{children:"Product Quantity"}),Object(d.jsx)(b.a.Control,{type:"text",value:h,onChange:function(e){return p(e.target.value)}})]}),Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"productPrice",children:[Object(d.jsx)(b.a.Label,{children:"Product Price"}),Object(d.jsx)(b.a.Control,{type:"text",value:v,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"productCategory",children:[Object(d.jsx)(b.a.Label,{children:"Product Category"}),Object(d.jsx)(b.a.Control,{type:"text",value:w,onChange:function(e){return S(e.target.value)}})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(d.jsx)(O.a,{variant:"danger",type:"button",href:"/products",children:"Cancel"}),Object(d.jsx)(O.a,{variant:"success",type:"submit",children:"Save"})]})]})},v=r(45),g=r.n(v);var N=function(){var e=Object(i.g)().pid,t=Object(i.f)(),r=localStorage.getItem("user"),c=g()("http://localhost:8484/api/products/"+e,{headers:{Authorization:null!==r?"Bearer "+JSON.parse(r).token:""},depends:["undefined"!==typeof e]}),n=c.isLoading,a=c.data;return c.error&&t.push("/products"),Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{isLoggedIn:null!==r}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"container col-md-5",children:[Object(d.jsx)("h2",{children:"undefined"==typeof e?"New Product":"Edit Product "+e}),!n&&Object(d.jsx)(f,{pc:a})]})]})},y=r(16),w=r.n(y),S=r(19);var C=function(e){var t=e.pc,r=e.update,n=e.setAlert,a=Object(c.useState)(1),s=Object(l.a)(a,2),o=s[0],u=s[1],j=Object(i.f)(),h=localStorage.getItem("user"),b=null!==h&&JSON.parse(h).roles.includes("ROLE_ADMIN"),p=null!==h&&JSON.parse(h).roles.includes("ROLE_USER"),x=null!==h&&JSON.parse(h).roles.includes("ROLE_MANAGER");return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t.product.id}),Object(d.jsx)("td",{children:t.product.name}),Object(d.jsx)("td",{children:t.category.name}),Object(d.jsx)("td",{children:t.product.quantity}),Object(d.jsxs)("td",{children:["$",t.product.price]}),Object(d.jsxs)("td",{children:["$",(t.product.quantity*t.product.price).toFixed(2)]}),Object(d.jsx)("td",{children:Object(d.jsxs)("div",{className:"d-flex justify-content-around",children:[(!b&&!x||p)&&Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{className:"mx-3",type:"number",min:"1",max:t.product.quantity,value:o,onChange:function(e){return u(e.target.value)}}),Object(d.jsx)(O.a,{variant:"primary",onClick:function(){null===h?j.push("/login"):(m.AddProductToCart(JSON.parse(h).id,t.product.id,o).then(function(){var e=Object(S.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error("Network response was not ok");case 2:return n(!0),e.next=5,new Promise((function(e){return setTimeout(e,2e3)}));case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)})),u(1))},children:"Add to cart"})]}),(b||x)&&Object(d.jsx)(O.a,{variant:"secondary",href:"/products/edit/"+t.product.id,children:"Edit"}),b&&Object(d.jsx)(O.a,{variant:"danger",onClick:function(){m.DeleteProduct(t.product.id).then((function(){return r()})).catch((function(e){return console.error(e)}))},children:"Delete"})]})})]})};var k=function(e){var t=Object(c.useState)([]),r=Object(l.a)(t,2),n=r[0],a=r[1];function s(){return o.apply(this,arguments)}function o(){return(o=Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.GetProducts().then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){s()}),[]),Object(d.jsxs)("table",{className:"table table-bordered",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Category"}),Object(d.jsx)("th",{children:"Quantity"}),Object(d.jsx)("th",{children:"Price"}),Object(d.jsx)("th",{children:"Subtotal"}),Object(d.jsx)("th",{children:"Actions"})]})}),Object(d.jsx)("tbody",{children:n.map((function(t,r){return Object(d.jsx)(C,{pc:t,update:s,setAlert:e.setAlert},r)}))})]})},P=r(88);var I=function(e){var t=e.alert,r=e.setAlert,c=null!==localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).roles.includes("ROLE_ADMIN");return Object(d.jsxs)("div",{className:"my-3",children:[Object(d.jsx)(P.a,{variant:"success",show:t,dismissible:!0,onClose:function(){return r(!1)},children:Object(d.jsx)("div",{className:"d-flex justify-content-center",children:"Item added to cart"})}),Object(d.jsx)("div",{className:"my-3 d-flex justify-content-start",children:c&&Object(d.jsx)(O.a,{variant:"success",href:"/products/add",children:"Add New Product"})})]})};var L=function(){var e=localStorage.getItem("user"),t=Object(c.useState)(!1),r=Object(l.a)(t,2),n=r[0],a=r[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{isLoggedIn:null!==e}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(I,{alert:n,setAlert:a}),Object(d.jsx)(k,{setAlert:a})]})]})},E=r(2);var A=function(e){var t=e.Login,r=e.error,n=Object(c.useState)({username:"",password:""}),a=Object(l.a)(n,2),s=a[0],o=a[1];return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s)},children:[""!==r?Object(d.jsxs)("div",{className:"error",children:[r," "]}):"",Object(d.jsxs)("div",{className:"simple-login-container",children:[Object(d.jsx)("h2",{children:"Login Form"}),Object(d.jsx)("div",{className:"row my-3",children:Object(d.jsx)("div",{className:"col-md-12 form-group",children:Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",onChange:function(e){return o(Object(E.a)(Object(E.a)({},s),{},{username:e.target.value}))},value:s.username})})}),Object(d.jsx)("div",{className:"row my-3",children:Object(d.jsx)("div",{className:"col-md-12 form-group",children:Object(d.jsx)("input",{type:"password",placeholder:"Enter your Password",className:"form-control",onChange:function(e){return o(Object(E.a)(Object(E.a)({},s),{},{password:e.target.value}))},value:s.passowrd})})}),Object(d.jsx)("div",{className:"row my-3",children:Object(d.jsxs)("div",{className:"col-md-12 form-group d-flex justify-content-around",children:[Object(d.jsx)("a",{href:"/",className:"btn btn-danger",children:"Cancel"}),Object(d.jsx)("input",{type:"submit",className:"btn btn-block btn-success"})]})})]})]})};r(65);var D=function(){var e=Object(c.useState)(localStorage.getItem("user")),t=Object(l.a)(e,2),r=t[0],n=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),o=s[0],u=s[1],j=Object(i.f)();return Object(d.jsx)("div",{className:"Login",children:null!==r?Object(d.jsxs)("div",{className:"welcome",children:[Object(d.jsxs)("h2",{children:[" Welcome, ",Object(d.jsxs)("span",{children:[" ",r.username]})]}),Object(d.jsx)("button",{onClick:function(){localStorage.removeItem("user"),n(null)},children:" Logout "})]}):Object(d.jsx)(A,{Login:function(e){m.LoginRequest(e.username,e.password).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e)),n(e),j.push("/products")})).catch((function(e){console.error("There has been a problem with your fetch operation:",e),u("Incorrect username or password")}))},error:o})})};var J=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),r=t[0],n=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),o=s[0],u=s[1],j=["ROLE_USER","ROLE_ADMIN","ROLE_MANAGER"],h=Object(c.useState)([]),O=Object(l.a)(h,2),p=O[0],x=O[1],f=Object(i.f)(),v=null!==localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).roles.includes("ROLE_ADMIN"),g=[],N=function(e){var t=j[e];g.push(Object(d.jsx)(b.a.Check,{type:"checkbox",value:t,label:t,id:e,onChange:function(){p.includes(t)?x(p.filter((function(e){return e!==t}))):(p.push(t),x(p))}},e))};for(var y in j)N(y);return Object(d.jsxs)(b.a,{onSubmit:function(e){m.NewUser(r,o,p).then((function(e){if(!e.ok)throw new Error("Response not ok!");v?f.push("/"):f.push("/login")})).catch((function(e){console.error("There has been a problem with your fetch operation:",e)})),e.preventDefault()},children:[Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"username",children:[Object(d.jsx)(b.a.Label,{children:"Username"}),Object(d.jsx)(b.a.Control,{type:"text",value:r,onChange:function(e){return n(e.target.value)}})]}),Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"password",children:[Object(d.jsx)(b.a.Label,{children:"Password"}),Object(d.jsx)(b.a.Control,{type:"password",value:o,onChange:function(e){return u(e.target.value)}})]}),v&&Object(d.jsxs)(b.a.Group,{className:"mb-3",controlId:"roles",children:[Object(d.jsx)(b.a.Label,{children:"Roles"}),g]}),Object(d.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(d.jsx)("a",{href:"/landingPage",className:"btn btn-danger",children:"Cancel"}),Object(d.jsx)("input",{type:"submit",className:"btn btn-success",value:"Save"})]})]})};var T=function(){return Object(d.jsxs)("div",{className:"container col-md-5",children:[Object(d.jsx)("h1",{children:"Create a new User!"}),Object(d.jsx)(J,{})]})},R=r(49),G=r.n(R),U=r(50),q=r.n(U);var F=function(e){for(var t=e.cart,r=e.totalPrice,c=e.getCart,n=[],a=function(e){var r=t[e];n.push(Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e+1}),Object(d.jsx)("th",{scope:"row",children:r.product.name}),Object(d.jsx)("td",{children:r.quantity}),Object(d.jsxs)("td",{children:["$",r.product.price]}),Object(d.jsxs)("td",{children:["$",(r.quantity*r.product.price).toFixed(2)]}),Object(d.jsx)("td",{children:Object(d.jsx)(O.a,{variant:"danger",onClick:function(){return function(e){var t=localStorage.getItem("user");null!==t&&m.DeleteProductFromCart(JSON.parse(t).id,e).then((function(e){if(!e.ok)throw new Error("Network response was not ok");c()})).catch((function(e){return console.error(e)}))}(r.product.id)},children:"Delete"})})]},e))},s=0;s<t.length;s++)a(s);return Object(d.jsxs)("div",{className:"my-3",children:[Object(d.jsxs)("table",{className:"table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col"}),Object(d.jsx)("th",{scope:"col",children:"Name"}),Object(d.jsx)("th",{scope:"col",children:"Quantity"}),Object(d.jsx)("th",{scope:"col",children:"Price"}),Object(d.jsx)("th",{scope:"col",children:"Subtotal"}),Object(d.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(d.jsx)("tbody",{children:n})]}),Object(d.jsx)("div",{className:"d-flex justify-content-end",children:Object(d.jsxs)("h3",{style:{color:"green",fontWeight:"bold"},children:["$",(Math.round(100*r)/100).toFixed(2)]})})]})};var z=function(){var e=Object(i.f)(),t=null===localStorage.getItem("user")?null:JSON.parse(localStorage.getItem("user")),r=Object(c.useState)([]),n=Object(l.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(0),u=Object(l.a)(o,2),j=u[0],b=u[1],O=Object(c.useCallback)(Object(S.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.GetCart(t.id).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){s(e),b(0);var t=function(t){var r=e[t];b((function(e){return e+r.product.price*r.quantity}))};for(var r in e)t(r)})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)}))),[t.id]);function p(){return(p=Object(S.a)(w.a.mark((function r(c){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(c),r.next=3,q.a.post("http://localhost:8484/api/payment/charge","",{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token,token:c.id,amount:j,userid:t.id}}).then((function(){alert("Payment Success"),e.push("/products")})).catch((function(e){alert(e)}));case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(c.useEffect)((function(){O()}),[O]),Object(d.jsxs)("div",{children:[Object(d.jsx)(h,{isLoggedIn:null!==t}),Object(d.jsxs)("div",{className:"container col-md-5",children:[Object(d.jsx)("h2",{className:"my-3",children:"Checkout"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(F,{cart:a,totalPrice:j,getCart:O}),Object(d.jsx)("div",{className:"d-flex justify-content-end",children:Object(d.jsx)(G.a,{stripeKey:"pk_test_51JPKxyG8YVxXlobJkSvbwGXNpZk1I00iw4PzpdUdC5sWTiqkfOr9pmHTkFrNvhURV90F9O6o7WipZWhAPVwz2Yva00iAQt1xZ4",token:function(e){return p.apply(this,arguments)}})})]})]})]})};var _=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/products/add",children:Object(d.jsx)(N,{})}),Object(d.jsx)(i.a,{path:"/products/edit/:pid",children:Object(d.jsx)(N,{})}),Object(d.jsx)(i.a,{path:"/products",children:Object(d.jsx)(L,{})}),Object(d.jsx)(i.a,{path:"/Login",children:Object(d.jsx)(D,{})}),Object(d.jsx)(i.a,{path:"/createNewUser",children:Object(d.jsx)(T,{})}),Object(d.jsx)(i.a,{path:"/cart",children:Object(d.jsx)(z,{})}),Object(d.jsx)(i.a,{path:"/",children:Object(d.jsx)(u,{})})]})})},M=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,89)).then((function(t){var r=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),c(e),n(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(_,{})}),document.getElementById("root")),M()}},[[85,1,2]]]);
//# sourceMappingURL=main.bdf04dc2.chunk.js.map